<template>
  <view class="component-page">
    <view class="page-header">
      <text class="page-title">Message 消息提示</text>
      <text class="page-desc">轻量级的信息反馈组件</text>
    </view>

    <view class="demo-section">
      <view class="section-header">
        <text class="section-title">消息类型</text>
      </view>
      <view class="section-content">
        <frame-space :size="12" :wrap="true">
          <frame-button size="small" theme="success" @click="showMessage('success')">
            成功提示
          </frame-button>
          <frame-button size="small" theme="danger" @click="showMessage('error')">
            错误提示
          </frame-button>
          <frame-button size="small" theme="warning" @click="showMessage('warning')">
            警告提示
          </frame-button>
          <frame-button size="small" theme="primary" @click="showMessage('info')">
            信息提示
          </frame-button>
        </frame-space>
      </view>
    </view>

    <view class="demo-section">
      <view class="section-header">
        <text class="section-title">显示位置</text>
      </view>
      <view class="section-content">
        <frame-space :size="12" :wrap="true">
          <frame-button size="small" @click="showMessagePosition('top')">
            顶部显示
          </frame-button>
          <frame-button size="small" @click="showMessagePosition('center')">
            居中显示
          </frame-button>
          <frame-button size="small" @click="showMessagePosition('bottom')">
            底部显示
          </frame-button>
        </frame-space>
      </view>
    </view>

    <view class="demo-section">
      <view class="section-header">
        <text class="section-title">自定义配置</text>
      </view>
      <view class="section-content">
        <frame-space :size="12" :wrap="true">
          <frame-button size="small" @click="showLongMessage">
            长时间显示(5s)
          </frame-button>
          <frame-button size="small" @click="showNoIconMessage">
            无图标提示
          </frame-button>
        </frame-space>
      </view>
    </view>

    <view class="demo-section">
      <view class="section-header">
        <text class="section-title">API 属性</text>
      </view>
      <view class="api-list">
        <view class="api-item">
          <text class="api-name">type</text>
          <text class="api-type">string</text>
          <text class="api-desc">类型：success | error | warning | info</text>
        </view>
        <view class="api-item">
          <text class="api-name">message</text>
          <text class="api-type">string</text>
          <text class="api-desc">消息文字</text>
        </view>
        <view class="api-item">
          <text class="api-name">position</text>
          <text class="api-type">string</text>
          <text class="api-desc">显示位置：top | center | bottom</text>
        </view>
        <view class="api-item">
          <text class="api-name">duration</text>
          <text class="api-type">number</text>
          <text class="api-desc">显示时长(ms)，默认3000</text>
        </view>
        <view class="api-item">
          <text class="api-name">show-icon</text>
          <text class="api-type">boolean</text>
          <text class="api-desc">是否显示图标</text>
        </view>
      </view>
    </view>

    <!-- 消息组件 -->
    <frame-message
      :show="messageShow"
      :type="messageType"
      :message="messageText"
      :position="messagePosition"
      :duration="messageDuration"
      :show-icon="messageShowIcon"
      @close="messageShow = false"
    />
  </view>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const messageShow = ref(false)
const messageType = ref<'success' | 'error' | 'warning' | 'info'>('success')
const messageText = ref('')
const messagePosition = ref<'top' | 'center' | 'bottom'>('top')
const messageDuration = ref(3000)
const messageShowIcon = ref(true)

function showMessage(type: 'success' | 'error' | 'warning' | 'info') {
  const messages = {
    success: '操作成功！',
    error: '操作失败，请重试',
    warning: '请注意检查信息',
    info: '这是一条提示信息',
  }

  messageType.value = type
  messageText.value = messages[type]
  messagePosition.value = 'top'
  messageDuration.value = 3000
  messageShowIcon.value = true
  messageShow.value = true
}

function showMessagePosition(position: 'top' | 'center' | 'bottom') {
  messageType.value = 'info'
  messageText.value = `${position === 'top' ? '顶部' : position === 'center' ? '居中' : '底部'}显示`
  messagePosition.value = position
  messageDuration.value = 3000
  messageShowIcon.value = true
  messageShow.value = true
}

function showLongMessage() {
  messageType.value = 'success'
  messageText.value = '这条消息会显示 5 秒钟'
  messagePosition.value = 'top'
  messageDuration.value = 5000
  messageShowIcon.value = true
  messageShow.value = true
}

function showNoIconMessage() {
  messageType.value = 'info'
  messageText.value = '这是没有图标的消息'
  messagePosition.value = 'top'
  messageDuration.value = 3000
  messageShowIcon.value = false
  messageShow.value = true
}
</script>

<style scoped lang="scss">
.component-page {
  min-height: 100vh;
  background: var(--fui-color-bg-primary);
  padding: 32rpx;
  padding-bottom: 100rpx;
}

.page-header {
  padding: 40rpx 0;
  margin-bottom: 32rpx;
}

.page-title {
  font-size: 48rpx;
  font-weight: 700;
  color: var(--fui-color-text-primary);
  display: block;
  margin-bottom: 16rpx;
}

.page-desc {
  font-size: 28rpx;
  color: var(--fui-color-text-secondary);
  display: block;
  line-height: 1.6;
}

.demo-section {
  background: var(--fui-color-surface);
  border-radius: 24rpx;
  padding: 32rpx;
  margin-bottom: 24rpx;
  box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.04);
}

.section-header {
  margin-bottom: 24rpx;
  padding-bottom: 16rpx;
  border-bottom: 2rpx solid var(--fui-color-border);
}

.section-title {
  font-size: 32rpx;
  font-weight: 600;
  color: var(--fui-color-text-primary);
  display: block;
}

.section-content {
  display: flex;
  flex-direction: column;
  gap: 24rpx;
}

.api-list {
  display: flex;
  flex-direction: column;
  gap: 16rpx;
}

.api-item {
  padding: 24rpx;
  background: var(--fui-color-surface-muted);
  border-radius: 16rpx;
  border: 1rpx solid var(--fui-color-border);
}

.api-name {
  display: block;
  font-size: 28rpx;
  font-weight: 600;
  color: var(--fui-color-primary);
  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
  margin-bottom: 8rpx;
}

.api-type {
  display: inline-block;
  padding: 4rpx 12rpx;
  background: var(--fui-color-primary);
  color: #ffffff;
  border-radius: 8rpx;
  font-size: 22rpx;
  margin-bottom: 12rpx;
}

.api-desc {
  display: block;
  font-size: 24rpx;
  color: var(--fui-color-text-secondary);
  line-height: 1.6;
  margin-top: 8rpx;
}
</style>
